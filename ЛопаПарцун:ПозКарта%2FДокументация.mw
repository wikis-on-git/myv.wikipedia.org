<noinclude>{{docpage}}</noinclude><includeonly>{{СИШ}}</includeonly>
{{ambox|text=Этот шаблон не отображается при [[ВП:Книги|экспорте]] в PDF и OpenDocument. Вместо него используется пустой шаблон {{tl|ПозКарта/Печать}}. Для более подробной информации читайте [[ВП:Книги/Для экспертов|справку]].}}

{{tl|ПозКарта}} — шаблон для вставки карт, наглядно показывающих положение объекта (или нескольких объектов) в каком-либо регионе.
См. [[Special:Prefixindex/template:ПозКарта|полный список доступных стран и регионов]].

== Использование ==

=== Одна точка ===
; Обычная карта: Паг (Хорватия)
{{ПозКарта|Хорватия|label=Паг|lat_deg=44|lat_min=26|lon_deg=15|lon_min=3|width=300|float=right}}
{|style="background:transparent"
|
 <nowiki>{{ПозКарта
 |Хорватия
 |label=Паг
 |lat_deg=44|lat_min=26
 |lon_deg=15|lon_min=3
 |width=300
 |float=right
}}</nowiki>
|}
{{-}}
; Задание координат в десятичном виде и смена положения метки: Астана, Казахстан
{{ПозКарта|Казахстан Мастор|label=Астана|lat=51.1833|lon=71.4000|position=left|width=300}}
{|style="background:transparent"
|
 <nowiki>{{ПозКарта
 |Казахстан Мастор
 |label=Астана
 |lat=51.1833
 |lon=71.4000
 |position=left
 |width=300
}}</nowiki>
|}
{{-}}
; Настройка надписи, подписи и маркера: Харьков, Украина
{{ПозКарта
 |Украина Мастор
 |label=''Харьков''
 |lat=50
 |lon=36.25
 |position=top
 |width=300
 |float=right
 |background=#AFD6FF
 |label_size=222
 |mark=Wikipedia-Marker-landmark.svg
 |marksize=17
 |caption=Харьков, второй по величине город Украины
 }}
{|style="background:transparent"
|
 <nowiki>{{ПозКарта
 |Украина Мастор
 |label=''Харьков''
 |lat=50
 |lon=36.25
 |position=top
 |width=300
 |float=right
 |background=#AFD6FF
 |label_size=222
 |mark=Wikipedia-Marker-landmark.svg
 |marksize=17
 |caption=Харьков, второй по величине город Украины
 }}</nowiki>
|}
: Различные варианты маркеров можно найти в категории [[:commons:Category:Map pointers|Map pointers]] на [[Викисклад]]е.
{{-}}
; Карта без подписи: Брчко, Босния и Герцеговина
{{ПозКарта|Босния и Герцеговина|label=Брчко|position=left|width=300|lat=44.87|lon=18.81|float=right|caption=}}
{|style="background:transparent"
|
 <nowiki>{{ПозКарта
 |Босния и Герцеговина
 |label=Брчко
 |position=left
 |width=300
 |lat=44.87
 |lon=18.81
 |float=right
 |caption=
 }}</nowiki>
|}
{{-}}
; Пересечение 180°-меридиана: Сува, Фиджи
{{ПозКарта|Фиджи|label=Сува|lat_dir = S|lat_deg = 18|lat_min = 8|lat_sec = 0|lon_dir = E|lon_deg = 178|lon_min = 26|lon_sec = 0|position=left|width=300|float=right}}
{|style="background:transparent"
|
 <nowiki>{{ПозКарта
 |Фиджи
 |label=Сува
  |lat_dir = S|lat_deg = 18|lat_min = 8|lat_sec = 0
  |lon_dir = E|lon_deg = 178|lon_min = 26|lon_sec = 0
 |position=left
 |width=300
 |float=right
}}</nowiki>
|}
{{-}}

=== Активные области ===
{{ПозКарта|США|label=Чикаго|lat_deg=41|lat_min=54|lon_deg=87|lon_min=39|lon_dir=W|width=300|float=right|areas=rect 0 0 300 1000 [[Тихий океан]]}}
{|style="background:transparent"
|
 <nowiki>{{ПозКарта
 |США
 |label=Чикаго
 |lat_deg=44|lat_min=26
 |lon_deg=15|lon_min=3
 |width=300
 |float=right
 |areas=rect 0 0 300 1000 [[Тихий океан]]
}}</nowiki>
|}
{{-}}

=== Несколько точек ===
Для нескольких точек используется связка из шаблонов {{tl|ПозКарта+}} и {{tl|ПозКарта~}}. Действие параметров точно такое же, как и при использовании одной точки.

{{  ПозКарта+|Россия|width=666|float=center|caption=Некоторые города России|places=
  {{ПозКарта~|Россия|lat_deg=59|lat_min=57|lon_deg= 30|lon_min=19|background=#FCF5E3|label=Санкт-Петербург}}
  {{ПозКарта~|Россия|lat_deg=55|lat_min=45|lon_deg= 37|lon_min=37|label=Москва}}
  {{ПозКарта~|Россия|lat_deg=53|lat_min=11|lon_deg= 50|lon_min=07|label=Самара}}
  {{ПозКарта~|Россия|lat_deg=55|lat_min=02|lon_deg= 82|lon_min=55|position=bottom|background=#FCF5E3|label=Новосибирск}}
  {{ПозКарта~|Россия|lat_deg=56|lat_min=30|lon_deg= 84|lon_min=58|position=top|label=Томск}}
  {{ПозКарта~|Россия|lat_deg=42|lat_min=59|lon_deg= 47|lon_min=29|background=#FCF5E3|label=Махачкала}}
  {{ПозКарта~|Россия|lat_deg=56|lat_min=00|lon_deg= 92|lon_min=56|label=Красноярск}}
  {{ПозКарта~|Россия|lat_deg=56|lat_min=40|lon_deg=124|lon_min=42|label=Нерюнгри}}
  {{ПозКарта~|Россия|lat_deg=43|lat_min=07|lon_deg=131|lon_min=54|label=Владивосток}}
  {{ПозКарта~|Россия|lat_deg=48|lat_min=29|lon_deg=135|lon_min=04|background=#FCF5E3|label=Хабаровск}}
  {{ПозКарта~|Россия|lat_deg=64|lat_min=44|lon_deg=177|lon_min=31|background=#FCF5E3|label=Анадырь}}
}}
<pre>
{{  ПозКарта+|Россия|width=666|float=center|caption=Некоторые города России|places=
  {{ПозКарта~|Россия|lat_deg=59|lat_min=57|lon_deg= 30|lon_min=19|background=#FCF5E3|label=Санкт-Петербург}}
  {{ПозКарта~|Россия|lat_deg=55|lat_min=45|lon_deg= 37|lon_min=37|label=Москва}}
  {{ПозКарта~|Россия|lat_deg=53|lat_min=11|lon_deg= 50|lon_min=07|label=Самара}}
  {{ПозКарта~|Россия|lat_deg=55|lat_min=02|lon_deg= 82|lon_min=55|position=bottom|background=#FCF5E3|label=Новосибирск}}
  {{ПозКарта~|Россия|lat_deg=56|lat_min=30|lon_deg= 84|lon_min=58|position=top|label=Томск}}
  {{ПозКарта~|Россия|lat_deg=42|lat_min=59|lon_deg= 47|lon_min=29|background=#FCF5E3|label=Махачкала}}
  {{ПозКарта~|Россия|lat_deg=56|lat_min=00|lon_deg= 92|lon_min=56|label=Красноярск}}
  {{ПозКарта~|Россия|lat_deg=56|lat_min=40|lon_deg=124|lon_min=42|label=Нерюнгри}}
  {{ПозКарта~|Россия|lat_deg=43|lat_min=07|lon_deg=131|lon_min=54|label=Владивосток}}
  {{ПозКарта~|Россия|lat_deg=48|lat_min=29|lon_deg=135|lon_min=04|background=#FCF5E3|label=Хабаровск}}
  {{ПозКарта~|Россия|lat_deg=64|lat_min=44|lon_deg=177|lon_min=31|background=#FCF5E3|label=Анадырь}}
}}</pre>

=== Альтернативная карта ===
Если использующаяся по умолчанию карта не устраивает, можно воспользоваться альтернативной картой.

'''Внимание:''' проекция и параметры обрезки альтернативной карты должны обязательно совпадать с параметрами карты по умолчанию.
{| class="wikitable"
|-
! width=30% | Карта по умолчанию
! width=30% | Физическая карта
! width=30% | Альтернативная карта
|-
| align="center" | <nowiki> |alt = </nowiki>
| align="center" | <nowiki> |alt = physical </nowiki>
| align="center" | <nowiki> |alt = Location of Bezhanitsky District (Pskov Oblast).svg </nowiki>
|-
| {{ПозКарта
 |Россия Псковонь ёнкс
 |label= '''[[Полисто|Полисто]]''' эрьке
  |lat_dir = |lat_deg = 57.190098 |lat_min = |lat_sec = 
  |lon_dir = |lon_deg = 30.387757 |lon_min = |lon_sec = 
 |position=left
 |width=250
 |float=center
 |mark=Blue pog.svg
 |caption=
 |alt = default
}}
| {{ПозКарта
 |Россия Псковонь ёнкс
 |label='''[[Полисто|Полисто]]''' эрьке
  |lat_dir = |lat_deg = 57.190098 |lat_min = |lat_sec = 
  |lon_dir = |lon_deg = 30.387757 |lon_min = |lon_sec = 
 |position=left
 |width=250
 |float=center
 |mark=Blue pog.svg
 |caption=
 |alt = physical
}}
| {{ПозКарта
 |Россия Псковонь ёнкс
 |label='''[[Полисто (озеро)|Полисто]]''' эрьке
  |lat_dir = |lat_deg = 57.190098 |lat_min = |lat_sec = 
  |lon_dir = |lon_deg = 30.387757 |lon_min = |lon_sec = 
 |position=left
 |width=250
 |float=center
 |mark=Blue pog.svg
 |caption=
 |alt = Location of Bezhanitsky District (Pskov Oblast).svg
}}
|}
Пока используются параметры для альтернативных карт:
* '''physical''' в большинстве географических шаблонов (например, {{tl|Возвышенность}})
* '''hydro''' в шаблоне {{tl|Река}}

=== Полный список параметров ===
<small>''Обозначения:'' <span style="border-left:3px solid red">&nbsp;параметр шаблонов {{tl|ПозКарта}} и {{tl|ПозКарта+}}</span>; <span style="border-left:3px solid #7EBF33">&nbsp;{{tl|ПозКарта}} и {{tl|ПозКарта~}}</span></small>
* <span style="border-left:3px solid #7EBF33"><span style="border-left:3px solid red">&nbsp;'''1'''</span></span> — название карты (можно указывать без номера, см. примеры);
* <span style="border-left:3px solid red">&nbsp;'''float'''</span> — размещение карты:
** left, right<sub>по умолчанию</sub> — обтекание по левому или правому краю;
** center — выравнивание по центру;
** none — без обтекания;
* <span style="border-left:3px solid red">&nbsp;'''caption'''</span> — подпись:
** Если задана, изображение попадает в толстую серую рамку, как вставленная картинка;
** Если не задана, серой рамки нет, а под картой появляется подпись ''имя страницы, имя карты'';
** Если задана пустой — и рамка, и какая-либо подпись отсутствуют;
* <span style="border-left:3px solid #7EBF33"><span style="border-left:3px solid red">&nbsp;'''label'''</span></span> — надпись рядом с точкой. {{tl|ПозКарта+}} использует его только для автоматической подписи;
* <span style="border-left:3px solid red">&nbsp;'''width'''</span> — ширина карты в пикселях (по умолчанию 240);
* <span style="border-left:3px solid red">&nbsp;'''alt'''</span> — альтернативная карта — название класса карт (например, «physical»), либо имя файла, которым будет заменена карта. Формулы расчёта координат не меняются, поэтому изображения при наложении должны соответствовать;
* <span style="border-left:3px solid red">&nbsp;'''border'''</span> — цвет границы.
* <span style="border-left:3px solid #7EBF33"><span style="border-left:3px solid red">&nbsp;'''areas'''</span></span> — активные области на изображении. Реализуются с помощью расширения [[:mw:Extension:ImageMap|ImageMap]] и используют его синтаксис. Координаты вычисляются относительно полного размера изображения.

* <span style="border-left:3px solid #7EBF33">&nbsp;'''lat''' <small>('''lat_dir''', '''lat_deg''', '''lat_min''', '''lat_sec''')</small></span> — широта, может быть задана как в десятичных координатах (для южного полушария — отрицательная), так и в градусах, минутах и секундах (lat_dir — N для северного полушария, S для южного);
* <span style="border-left:3px solid #7EBF33">&nbsp;'''lon''' <small>('''lon_dir''', '''lon_deg''', '''lon_min''', '''lon_sec''')</small></span> — долгота, также допускает два формата. Десятичное значение отрицательно для западного полушария; lon_dir — W для западного полушария, E для восточного;
* <span style="border-left:3px solid #7EBF33">&nbsp;'''label'''</span> — надпись рядом с точкой;
* <span style="border-left:3px solid #7EBF33">&nbsp;'''position'''</span> — положение надписи относительно точки:
** left, right — слева или справа;
** top, bottom — сверху (может некорректно работать на больших шрифтах) или снизу;
** auto<sub>по умолчанию</sub> — автовыбор между right (для точек в левой половине карты) и left (в правой);
** none — скрыть надпись;
* <span style="border-left:3px solid #7EBF33">&nbsp;'''label_size'''</span> — размер текста надписи в процентах от нормального;
* <span style="border-left:3px solid #7EBF33">&nbsp;'''background'''</span> — цвет фона надписи, рекомендуется использовать только при необходимости и делать равным цвету фона карты;
* <span style="border-left:3px solid #7EBF33">&nbsp;'''mark'''</span> — имя файла с точкой, по умолчанию {{cn|[[:File:Red pog.svg|Red pog.svg]]}};
* <span style="border-left:3px solid #7EBF33">&nbsp;'''markalt'''</span> — текст, который будет использован в качестве alt-текста для картинки с точкой;
* <span style="border-left:3px solid #7EBF33">&nbsp;'''marksize'''</span> — размер точки (9 — по умолчанию, 1 — точка отсутствует).

* '''places''' — параметр шаблона {{tl|ПозКарта+}} — список точек, составленный шаблонами {{tl|ПозКарта~}}.

== Как создавать карты ==
{{См. также|Шаблон:ПозКарта/Инструкция}}
Если в [[Special:Prefixindex/template:ПозКарта|списке]] не нашлось нужной карты или качество уже существующей карты не устраивает, её можно создать самостоятельно.

=== Изображение ===
Сгодится любое свободное изображение карты для которой известны проекция, параметры обрезки и нужный регион выделен на фоне других. Изображения рекомендуется переводить в векторный формат и раскрашивать в соответствии с легендой.
[[Артовкс:Positionskartenerstellung - Signaturvorlage ru.svg|555px|center|Рекомендации по раскрашиванию карт]]

=== Шаблон ===

==== Именование ====
Помните, что если на карте изображена внутренняя территориальная единица (например, [[провинция]]), то в поле создания шаблона необходимо набрать полную иерархию адресов, начиная с самого верхнего уровня (например, {{cn|Шаблон:ПозКарта '''Германия Тюрингия'''}}). Названные таким образом позиционные карты будут автоматически подставляться в шаблон {{tl|ЭТ}}. В остальных случаях нужно лишь называть единицу — {{tl|ПозКарта Антарктида}}.

==== Цилиндрическая равнопромежуточная проекция ====
[[Артовкс:Croatia location map.svg|250px|thumb|right|Хорватия]]
Самый удобный для позиционных карт тип проекции. Преимущество данной проекции — простота формулы расчёта положения объекта (так как осями в карте являются широта и долгота в чистом виде). Недостаток — искажение карты (чем дальше от экватора, тем больше искажения), как следствие по такой карте, без дополнительных расчётов нельзя точно оценить расстояние между объектами. Чтобы уменьшить искажения, карта специально растягивается по оси север-юг, например для карты Хорватии коэффициент растяжение равен 140 %.

Для создания шаблона будут нужны только параметры обрезки карты: долгота крайнего левого и крайнего правого меридиана, широта крайней верхней и крайней нижней параллели на изображении. Получившиеся значения в десятичном виде будут значениями параметров '''left''' и '''right''', '''top''' и '''bottom''' соответственно. Значения для южного и западного полушарий указываются с минусом.
 
Для [[ЛопаПарцун:ПозКарта Хорватия|Хорватии]]:
 
<pre>
|name    = Хорватия
| top    = 46.8
| bottom = 42.1
| left   = 13.1
| right  = 19.9
| image  = Croatia location map.svg
</pre>

Если есть альтернативные изображения (например, физическая карта), и при этом эти изображения в точности совпадают по координатам с исходным, укажите их в качестве классов. Например:

<pre>
| imagephysical = Example map 2.jpg
| image123 = Example map 30.svg
</pre>

Тогда при вызове шаблона с параметром ''alt=physical'' подставится {{cn|Example map 2.jpg}}, а ''alt=123'' подставит {{cn|Example map 30.svg}}.

Если карта пересекает 180°-меридиан, точки западного полушария будут корректно отображаться с параметром '''crosses180'''=1.

==== Прямая азимутальная (полярная) проекция ====
[[Артовкс:Antarctica location map.svg|250px|thumb|right|Антарктида]]
Чтобы всё заработало, нужно указать тип проекции параметром '''type'''='''polar'''.
 
Потребуется узнать координаты полюса, а также длину половины меридиана (от полюса до экватора) на данном изображении. Это параметры '''x''' и '''y''', '''length_x''' и '''length_y''' соответственно (записываются в процентах от ширины/высоты карты). Пригодится угол в градусах между нулевым меридианом и прямой, направленной вправо из северного полюса (влево из южного). <!-- параметр '''alpha''', а также параметр '''mult''' — если карта сплющена по горизонтали, как, например, карта России, на этот параметр будут умножаться углы. Если карта строго круглая, как, например, карта Антарктиды, его значение равно 1.-->
 
Два полушария одновременно задействовать нельзя.
 
Для [[ЛопаПарцун:ПозКарта Антарктида|Антарктиды]]:
 
<pre>
|type = polar
|x = 50
|y = 50
|alpha = -90
|mult = 1
|length_x = -150
|length_y = -150
|image = Antarctica blank.svg
</pre>
{{-}}

==== Нестандартная проекция ====
[[Артовкс:China edcp location map.svg|250px|thumb|right|Карта Китая в конической равнопромежуточной проекции]]
Чтобы всё заработало, нужно указать тип проекции параметром '''type'''='''custom'''.
 
Для расчёта координат используются произвольные формулы, которые надо вставить в подстраницы /x и /y ({{cn|ПозКарта .../x}}). Подстраницы вызываются с двумя параметрами: {{{1}}} — долгота (−180…180), {{{2}}} — широта (−90…90). Результатом вычислений должно стать значение координаты точки в процентах (для /x — от ширины изображения, для /y — от высоты, отсчитывая от верхнего левого угла карты). На подстраницах не должно быть ничего, кроме формулы.

В качестве примера можно посмотреть [[ЛопаПарцун:ПозКарта Китайская Народная Республика]].
<pre>
 |name = Китайская Народная Республика
 |image = China edcp location map.svg
 |type=custom
</pre>
Карта прорисована в конической равнопромежуточной проекции. Для составления формулы расчёта положения маркера нам понадобятся следующие данные: первая и вторая стандартные параллели, средние параллель и меридиан, средний радиус Земли в процентах от ширины (или высоты) карты, соотношение ширины и высоты карты, смещение геометрического центра карты относительно точки пересечения средних меридиана и параллели.

Формулы расчёта координат объекта:
; [[ЛопаПарцун:ПозКарта Китайская Народная Республика/x|Ось X]]
<pre>{{#expr: 50.0 +  116.80932603407057 * ((1.9996655301850468-({{{2}}}*3.14159265358979 / 180)) * sin(0.5867115434267053 * ({{{1}}} - 104) * 3.14159265358979 / 180)) }}</pre>
; [[ЛопаПарцун:ПозКарта Китайская Народная Республика/y|Ось Y]]
<pre>{{#expr: 50.0 + 1.256383 * 116.80932603407057 * 0.02641006622571962 - 1.256383 * 116.80932603407057 * (1.3713469994670882 - (1.9996655301850468-({{{2}}}*3.14159265358979 / 180)) * cos(0.5867115434267053 * ({{{1}}} - 104) * 3.14159265358979 / 180)) }}</pre>

Полный список функций, доступных в формулах расчёта координат, можно нати в [[meta:Help:Calculation]]. Тригонометрические функции принимают аргументы в радианах, для преобразования в радианы из градусов обычно используется конструкция <code><nowiki>{{{1}}}*pi/180</nowiki></code>.

<includeonly>
[[Категория:ЛопаПарцуны:Позиционные карты| ]]
[[Категория:Википедия:Исключения из печати|{{PAGENAME}}]]

[[be-x-old:Шаблён:Лякалізацыйная мапа]]
[[bg:ЛопаПарцун:ПК]]
[[bs:Šablon:Lokacijska karta]]
[[da:Skabelon:Kortpositioner]]
[[de:Vorlage:Positionskarte]]
[[dsb:Pśedłoga:LocMap]]
[[es:Plantilla:Location map]]
[[en:Template:Location map]]
[[eo:Ŝablono:Situo sur mapo]]
[[fi:Malline:Location map]]
[[hr:Predložak:Lokacijska karta]]
[[hsb:Předłoha:LocMap]]
[[hy:Կաղապար:Տեղորոշման քարտեզ]]
[[is:Snið:Location map]]
[[it:Template:Mappa di localizzazione]]
[[lv:Veidne:VietasKarte]]
[[nl:Sjabloon:Positiekaart]]
[[nn:Mal:Kartposisjon]]
[[no:Mal:Kartposisjon]]
[[os:ЛопаПарцун:ПозКартæ]]
[[pl:Szablon:Mapa lokalizacyjna]]
[[pt:Predefinição:Mapa de localização]]
[[simple:Template:Location map]]
[[sl:Predloga:Lokacijska karta]]
[[sq:Stampa:Harta e pozicionit]]
[[sv:Mall:Kartposition]]
[[zh:Template:Location map]]
</includeonly>
